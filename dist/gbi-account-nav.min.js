(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},s=[],a=0;a<t.length;a++){var l=t[a],d=r.base?l[0]+r.base:l[0],c=i[d]||0,p="".concat(d," ").concat(c);i[d]=c+1;var u=n(p),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(h);else{var g=o(h,r);r.byIndex=a,e.splice(a,0,{identifier:p,updater:g,references:1})}s.push(p)}return s}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var a=n(i[s]);e[a].references--}for(var l=r(t,o),d=0;d<i.length;d++){var c=n(i[d]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}i=l}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var d=0;d<t.length;d++){var c=[].concat(t[d]);r&&s[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},365:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([t.id,"body {\n    --color-green-light: #87ca9c;\n    --color-green: rgba(0, 150, 108, 1);\n    --color-green-50: rgba(0, 150, 108, 0.48);\n    --color-green-dark: rgba(48, 112, 84, 1);\n}\n\n.navbar {\n    background-color: var(--color-green-dark);\n    padding: 10px 20px;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n}\n\n.navbar button {\n    background-color: var(--color-green);\n    border: none;\n    padding: 12px 30px;\n    color: white;\n    font-size: 14px;\n    cursor: pointer;\n    transition: background-color 0.3s;\n}\n\n.logged-out-actions, .logged-in-actions {\n    gap: 0.15rem;\n}\n\n.first-button {\n    border-radius: 20px 0 0 20px;\n}\n\n.second-button {\n    border-radius: 0 20px 20px 0;\n}\n\n.navbar button:hover {\n    background-color: var(--color-green-50);\n}\n\n.search-container {\n    position: relative;\n    margin-right: 10px;\n}\n\n.search-icon {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    z-index: 1;\n    border: none;\n    position: absolute;\n    right: 0;\n    width: 32px;\n    height: 100%;\n}\n\n.search-icon svg {\n    padding-right: 1px;\n    width: 20px;\n    height: 20px;\n    fill: white;\n}\n\n.search-icon svg:hover {\n    fill: var(--color-green-light);\n}\n\n.search-wrapper {\n    position: relative;\n    display: flex;\n    align-items: center;\n    border: 2px solid white;\n    border-radius: 17px;\n    height: 32px;\n    transition: width 0.3s ease;\n    width: 32px;\n}\n\n.search-wrapper.expanded {\n    width: 14rem;\n}\n\n.ts-wrapper {\n    width: calc(100% - 30px);\n    height: 100%;\n    border: none;\n}\n\n.ts-control {\n    visibility: hidden;\n    border: none !important;\n    background: transparent !important;\n    box-shadow: none !important;\n}\n\n.ts-control.expanded {\n    visibility: visible;\n    transition: visibility 0.1s step-end;\n}\n\n/*Remove dropdown arrow*/\n.ts-control::after {\n    display: none !important;\n}\n\n.ts-control input, input::placeholder {\n    color: rgba(255, 255, 255, 0.7);\n}\n\n.ts-dropdown {\n    margin-left: 7px;\n}\n\n/* Make the selected item in the dropdown the same color as the placeholder */\n.ts-item {\n    color: rgba(255, 255, 255, 0.7);\n}",""]);const a=s},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},934:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([t.id,'/**\n * tom-select.css (v2.4.3)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n.ts-control {\n  border: 1px solid #d0d0d0;\n  padding: 8px 8px;\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n  display: flex;\n  flex-wrap: wrap;\n}\n.ts-wrapper.multi.has-items .ts-control {\n  padding: calc(8px - 2px - 1px) 8px calc(8px - 2px - 3px - 1px);\n}\n.full .ts-control {\n  background-color: #fff;\n}\n.disabled .ts-control, .disabled .ts-control * {\n  cursor: default !important;\n}\n.focus .ts-control {\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.15);\n}\n.ts-control > * {\n  vertical-align: baseline;\n  display: inline-block;\n}\n.ts-wrapper.multi .ts-control > div {\n  cursor: pointer;\n  margin: 0 3px 3px 0;\n  padding: 2px 6px;\n  background: #1da7ee;\n  color: #fff;\n  border: 1px solid #0073bb;\n}\n.ts-wrapper.multi .ts-control > div.active {\n  background: #92c836;\n  color: #fff;\n  border: 1px solid #00578d;\n}\n.ts-wrapper.multi.disabled .ts-control > div, .ts-wrapper.multi.disabled .ts-control > div.active {\n  color: white;\n  background: #d2d2d2;\n  border: 1px solid #aaaaaa;\n}\n.ts-control > input {\n  flex: 1 1 auto;\n  min-width: 7rem;\n  display: inline-block !important;\n  padding: 0 !important;\n  min-height: 0 !important;\n  max-height: none !important;\n  max-width: 100% !important;\n  margin: 0 !important;\n  text-indent: 0 !important;\n  border: 0 none !important;\n  background: none !important;\n  line-height: inherit !important;\n  -webkit-user-select: auto !important;\n     -moz-user-select: auto !important;\n      -ms-user-select: auto !important;\n          user-select: auto !important;\n  box-shadow: none !important;\n}\n.ts-control > input::-ms-clear {\n  display: none;\n}\n.ts-control > input:focus {\n  outline: none !important;\n}\n.has-items .ts-control > input {\n  margin: 0 4px !important;\n}\n.ts-control.rtl {\n  text-align: right;\n}\n.ts-control.rtl.single .ts-control:after {\n  left: 15px;\n  right: auto;\n}\n.ts-control.rtl .ts-control > input {\n  margin: 0 4px 0 -2px !important;\n}\n.disabled .ts-control {\n  opacity: 0.5;\n  background-color: #fafafa;\n}\n.input-hidden .ts-control > input {\n  opacity: 0;\n  position: absolute;\n  left: -10000px;\n}\n\n.ts-dropdown {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  width: 100%;\n  z-index: 10;\n  border: 1px solid #d0d0d0;\n  background: #fff;\n  margin: 0.25rem 0 0;\n  border-top: 0 none;\n  box-sizing: border-box;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  border-radius: 0 0 3px 3px;\n}\n.ts-dropdown [data-selectable] {\n  cursor: pointer;\n  overflow: hidden;\n}\n.ts-dropdown [data-selectable] .highlight {\n  background: rgba(125, 168, 208, 0.2);\n  border-radius: 1px;\n}\n.ts-dropdown .option,\n.ts-dropdown .optgroup-header,\n.ts-dropdown .no-results,\n.ts-dropdown .create {\n  padding: 5px 8px;\n}\n.ts-dropdown .option, .ts-dropdown [data-disabled], .ts-dropdown [data-disabled] [data-selectable].option {\n  cursor: inherit;\n  opacity: 0.5;\n}\n.ts-dropdown [data-selectable].option {\n  opacity: 1;\n  cursor: pointer;\n}\n.ts-dropdown .optgroup:first-child .optgroup-header {\n  border-top: 0 none;\n}\n.ts-dropdown .optgroup-header {\n  color: #303030;\n  background: #fff;\n  cursor: default;\n}\n.ts-dropdown .active {\n  background-color: #f5fafd;\n  color: #495c68;\n}\n.ts-dropdown .active.create {\n  color: #495c68;\n}\n.ts-dropdown .create {\n  color: rgba(48, 48, 48, 0.5);\n}\n.ts-dropdown .spinner {\n  display: inline-block;\n  width: 30px;\n  height: 30px;\n  margin: 5px 8px;\n}\n.ts-dropdown .spinner::after {\n  content: " ";\n  display: block;\n  width: 24px;\n  height: 24px;\n  margin: 3px;\n  border-radius: 50%;\n  border: 5px solid #d0d0d0;\n  border-color: #d0d0d0 transparent #d0d0d0 transparent;\n  animation: lds-dual-ring 1.2s linear infinite;\n}\n@keyframes lds-dual-ring {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.ts-dropdown-content {\n  overflow: hidden auto;\n  max-height: 200px;\n  scroll-behavior: smooth;\n}\n\n.ts-wrapper.plugin-drag_drop .ts-dragging {\n  color: transparent !important;\n}\n.ts-wrapper.plugin-drag_drop .ts-dragging > * {\n  visibility: hidden !important;\n}\n\n.plugin-checkbox_options:not(.rtl) .option input {\n  margin-right: 0.5rem;\n}\n\n.plugin-checkbox_options.rtl .option input {\n  margin-left: 0.5rem;\n}\n\n/* stylelint-disable function-name-case */\n.plugin-clear_button {\n  --ts-pr-clear-button: 1em;\n}\n.plugin-clear_button .clear-button {\n  opacity: 0;\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: calc(8px - 6px);\n  margin-right: 0 !important;\n  background: transparent !important;\n  transition: opacity 0.5s;\n  cursor: pointer;\n}\n.plugin-clear_button.form-select .clear-button, .plugin-clear_button.single .clear-button {\n  right: max(var(--ts-pr-caret), 8px);\n}\n.plugin-clear_button.focus.has-items .clear-button, .plugin-clear_button:not(.disabled):hover.has-items .clear-button {\n  opacity: 1;\n}\n\n.ts-wrapper .dropdown-header {\n  position: relative;\n  padding: 10px 8px;\n  border-bottom: 1px solid #d0d0d0;\n  background: color-mix(#fff, #d0d0d0, 85%);\n  border-radius: 3px 3px 0 0;\n}\n.ts-wrapper .dropdown-header-close {\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  color: #303030;\n  opacity: 0.4;\n  margin-top: -12px;\n  line-height: 20px;\n  font-size: 20px !important;\n}\n.ts-wrapper .dropdown-header-close:hover {\n  color: black;\n}\n\n.plugin-dropdown_input.focus.dropdown-active .ts-control {\n  box-shadow: none;\n  border: 1px solid #d0d0d0;\n}\n.plugin-dropdown_input .dropdown-input {\n  border: 1px solid #d0d0d0;\n  border-width: 0 0 1px;\n  display: block;\n  padding: 8px 8px;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  background: transparent;\n}\n.plugin-dropdown_input .items-placeholder {\n  border: 0 none !important;\n  box-shadow: none !important;\n  width: 100%;\n}\n.plugin-dropdown_input.has-items .items-placeholder, .plugin-dropdown_input.dropdown-active .items-placeholder {\n  display: none !important;\n}\n\n.ts-wrapper.plugin-input_autogrow.has-items .ts-control > input {\n  min-width: 0;\n}\n.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control > input {\n  flex: none;\n  min-width: 4px;\n}\n.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control > input::-ms-input-placeholder {\n  color: transparent;\n}\n.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control > input::placeholder {\n  color: transparent;\n}\n\n.ts-dropdown.plugin-optgroup_columns .ts-dropdown-content {\n  display: flex;\n}\n.ts-dropdown.plugin-optgroup_columns .optgroup {\n  border-right: 1px solid #f2f2f2;\n  border-top: 0 none;\n  flex-grow: 1;\n  flex-basis: 0;\n  min-width: 0;\n}\n.ts-dropdown.plugin-optgroup_columns .optgroup:last-child {\n  border-right: 0 none;\n}\n.ts-dropdown.plugin-optgroup_columns .optgroup::before {\n  display: none;\n}\n.ts-dropdown.plugin-optgroup_columns .optgroup-header {\n  border-top: 0 none;\n}\n\n.ts-wrapper.plugin-remove_button .item {\n  display: inline-flex;\n  align-items: center;\n}\n.ts-wrapper.plugin-remove_button .item .remove {\n  color: inherit;\n  text-decoration: none;\n  vertical-align: middle;\n  display: inline-block;\n  padding: 0 6px;\n  border-radius: 0 2px 2px 0;\n  box-sizing: border-box;\n}\n.ts-wrapper.plugin-remove_button .item .remove:hover {\n  background: rgba(0, 0, 0, 0.05);\n}\n.ts-wrapper.plugin-remove_button.disabled .item .remove:hover {\n  background: none;\n}\n.ts-wrapper.plugin-remove_button .remove-single {\n  position: absolute;\n  right: 0;\n  top: 0;\n  font-size: 23px;\n}\n\n.ts-wrapper.plugin-remove_button:not(.rtl) .item {\n  padding-right: 0 !important;\n}\n.ts-wrapper.plugin-remove_button:not(.rtl) .item .remove {\n  border-left: 1px solid #0073bb;\n  margin-left: 6px;\n}\n.ts-wrapper.plugin-remove_button:not(.rtl) .item.active .remove {\n  border-left-color: #00578d;\n}\n.ts-wrapper.plugin-remove_button:not(.rtl).disabled .item .remove {\n  border-left-color: #aaaaaa;\n}\n\n.ts-wrapper.plugin-remove_button.rtl .item {\n  padding-left: 0 !important;\n}\n.ts-wrapper.plugin-remove_button.rtl .item .remove {\n  border-right: 1px solid #0073bb;\n  margin-right: 6px;\n}\n.ts-wrapper.plugin-remove_button.rtl .item.active .remove {\n  border-right-color: #00578d;\n}\n.ts-wrapper.plugin-remove_button.rtl.disabled .item .remove {\n  border-right-color: #aaaaaa;\n}\n\n:root {\n  --ts-pr-clear-button: 0px;\n  --ts-pr-caret: 0px;\n  --ts-pr-min: .75rem;\n}\n\n.ts-wrapper.single .ts-control, .ts-wrapper.single .ts-control input {\n  cursor: pointer;\n}\n\n.ts-control:not(.rtl) {\n  padding-right: max(var(--ts-pr-min), var(--ts-pr-clear-button) + var(--ts-pr-caret)) !important;\n}\n\n.ts-control.rtl {\n  padding-left: max(var(--ts-pr-min), var(--ts-pr-clear-button) + var(--ts-pr-caret)) !important;\n}\n\n.ts-wrapper {\n  position: relative;\n}\n\n.ts-dropdown,\n.ts-control,\n.ts-control input {\n  color: #303030;\n  font-family: inherit;\n  font-size: 13px;\n  line-height: 18px;\n}\n\n.ts-control,\n.ts-wrapper.single.input-active .ts-control {\n  background: #fff;\n  cursor: text;\n}\n\n.ts-hidden-accessible {\n  border: 0 !important;\n  clip: rect(0 0 0 0) !important;\n  -webkit-clip-path: inset(50%) !important;\n          clip-path: inset(50%) !important;\n  overflow: hidden !important;\n  padding: 0 !important;\n  position: absolute !important;\n  width: 1px !important;\n  white-space: nowrap !important;\n}\n\n.ts-wrapper.single .ts-control {\n  --ts-pr-caret: 2rem;\n}\n.ts-wrapper.single .ts-control::after {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 50%;\n  margin-top: -3px;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 5px 5px 0 5px;\n  border-color: #808080 transparent transparent transparent;\n}\n.ts-wrapper.single .ts-control:not(.rtl)::after {\n  right: 15px;\n}\n.ts-wrapper.single .ts-control.rtl::after {\n  left: 15px;\n}\n.ts-wrapper.single.dropdown-active .ts-control::after {\n  margin-top: -4px;\n  border-width: 0 5px 5px 5px;\n  border-color: transparent transparent #808080 transparent;\n}\n.ts-wrapper.single.input-active .ts-control, .ts-wrapper.single.input-active .ts-control input {\n  cursor: text;\n}\n\n.ts-wrapper {\n  display: flex;\n  min-height: 36px;\n}\n.ts-wrapper.multi.has-items .ts-control {\n  padding-left: 5px;\n  --ts-pr-min: $padding-x;\n}\n.ts-wrapper.multi .ts-control [data-value] {\n  text-shadow: 0 1px 0 rgba(0, 51, 83, 0.3);\n  border-radius: 3px;\n  background-color: color-mix(#1da7ee, #178ee9, 60%);\n  background-image: linear-gradient(to bottom, #1da7ee, #178ee9);\n  background-repeat: repeat-x;\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), inset 0 1px rgba(255, 255, 255, 0.03);\n}\n.ts-wrapper.multi .ts-control [data-value].active {\n  background-color: color-mix(#008fd8, #0075cf, 60%);\n  background-image: linear-gradient(to bottom, #008fd8, #0075cf);\n  background-repeat: repeat-x;\n}\n.ts-wrapper.multi.disabled .ts-control [data-value] {\n  color: #999;\n  text-shadow: none;\n  background: none;\n  box-shadow: none;\n}\n.ts-wrapper.multi.disabled .ts-control [data-value], .ts-wrapper.multi.disabled .ts-control [data-value] .remove {\n  border-color: #e6e6e6;\n}\n.ts-wrapper.multi.disabled .ts-control [data-value] .remove {\n  background: none;\n}\n.ts-wrapper.single .ts-control {\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.8);\n  background-color: color-mix(#fefefe, #f2f2f2, 60%);\n  background-image: linear-gradient(to bottom, #fefefe, #f2f2f2);\n  background-repeat: repeat-x;\n}\n\n.ts-wrapper.single .ts-control, .ts-dropdown.single {\n  border-color: #b8b8b8;\n}\n\n.dropdown-active .ts-control {\n  border-radius: 3px 3px 0 0;\n}\n\n.ts-dropdown .optgroup-header {\n  padding-top: 7px;\n  font-weight: bold;\n  font-size: 0.85em;\n}\n.ts-dropdown .optgroup {\n  border-top: 1px solid #f0f0f0;\n}\n.ts-dropdown .optgroup:first-child {\n  border-top: 0 none;\n}',""]);const a=s}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(72),o=n.n(r),i=n(825),s=n.n(i),a=n(659),l=n.n(a),d=n(56),c=n.n(d),p=n(540),u=n.n(p),h=n(113),g=n.n(h),m=n(934),f={};f.styleTagTransform=g(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=s(),f.insertStyleElement=u(),o()(m.A,f),m.A&&m.A.locals&&m.A.locals;var v=n(365),b={};function y(t,e){t.split(/\s+/).forEach((t=>{e(t)}))}b.styleTagTransform=g(),b.setAttributes=c(),b.insert=l().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=u(),o()(v.A,b),v.A&&v.A.locals&&v.A.locals;class w{constructor(){this._events={}}on(t,e){y(t,(t=>{const n=this._events[t]||[];n.push(e),this._events[t]=n}))}off(t,e){var n=arguments.length;0!==n?y(t,(t=>{if(1===n)return void delete this._events[t];const r=this._events[t];void 0!==r&&(r.splice(r.indexOf(e),1),this._events[t]=r)})):this._events={}}trigger(t,...e){var n=this;y(t,(t=>{const r=n._events[t];void 0!==r&&r.forEach((t=>{t.apply(n,e)}))}))}}const x=t=>(t=t.filter(Boolean)).length<2?t[0]||"":1==k(t)?"["+t.join("")+"]":"(?:"+t.join("|")+")",O=t=>{if(!A(t))return t.join("");let e="",n=0;const r=()=>{n>1&&(e+="{"+n+"}")};return t.forEach(((o,i)=>{o!==t[i-1]?(r(),e+=o,n=1):n++})),r(),e},_=t=>{let e=Array.from(t);return x(e)},A=t=>new Set(t).size!==t.length,S=t=>(t+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),k=t=>t.reduce(((t,e)=>Math.max(t,C(e))),0),C=t=>Array.from(t).length,I=t=>{if(1===t.length)return[[t]];let e=[];const n=t.substring(1);return I(n).forEach((function(n){let r=n.slice(0);r[0]=t.charAt(0)+r[0],e.push(r),r=n.slice(0),r.unshift(t.charAt(0)),e.push(r)})),e},L=[[0,65535]];let E,F;const T={},P={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let t in P){let e=P[t]||"";for(let n=0;n<e.length;n++){let r=e.substring(n,n+1);T[r]=t}}const q=new RegExp(Object.keys(T).join("|")+"|[̀-ͯ·ʾʼ]","gu"),N=(t,e="NFKD")=>t.normalize(e),j=t=>Array.from(t).reduce(((t,e)=>t+$(e)),""),$=t=>(t=N(t).toLowerCase().replace(q,(t=>T[t]||"")),N(t,"NFC")),M=t=>{const e=(t=>{const e={},n=(t,n)=>{const r=e[t]||new Set,o=new RegExp("^"+_(r)+"$","iu");n.match(o)||(r.add(S(n)),e[t]=r)};for(let e of function*(t){for(const[e,n]of t)for(let t=e;t<=n;t++){let e=String.fromCharCode(t),n=j(e);n!=e.toLowerCase()&&(n.length>3||0!=n.length&&(yield{folded:n,composed:e,code_point:t}))}}(t))n(e.folded,e.folded),n(e.folded,e.composed);return e})(t),n={};let r=[];for(let t in e){let o=e[t];o&&(n[t]=_(o)),t.length>1&&r.push(S(t))}r.sort(((t,e)=>e.length-t.length));const o=x(r);return F=new RegExp("^"+o,"u"),n},D=(t,e=1)=>(e=Math.max(e,t.length-1),x(I(t).map((t=>((t,e=1)=>{let n=0;return t=t.map((t=>(E[t]&&(n+=t.length),E[t]||t))),n>=e?O(t):""})(t,e))))),H=(t,e=!0)=>{let n=t.length>1?1:0;return x(t.map((t=>{let r=[];const o=e?t.length():t.length()-1;for(let e=0;e<o;e++)r.push(D(t.substrs[e]||"",n));return O(r)})))},V=(t,e)=>{for(const n of e){if(n.start!=t.start||n.end!=t.end)continue;if(n.substrs.join("")!==t.substrs.join(""))continue;let e=t.parts;const r=t=>{for(const n of e){if(n.start===t.start&&n.substr===t.substr)return!1;if(1!=t.length&&1!=n.length){if(t.start<n.start&&t.end>n.start)return!0;if(n.start<t.start&&n.end>t.start)return!0}}return!1};if(!(n.parts.filter(r).length>0))return!0}return!1};class z{parts;substrs;start;end;constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let n=new z,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop();for(const t of r)n.add(t);let i=e.substr.substring(0,t-o.start),s=i.length;return n.add({start:o.start,end:o.start+s,length:s,substr:i}),n}}const R=(t,e)=>{if(t)return t[e]},B=(t,e)=>{if(t){for(var n,r=e.split(".");(n=r.shift())&&(t=t[n]););return t}},K=(t,e,n)=>{var r,o;return t?(t+="",null==e.regex||-1===(o=t.search(e.regex))?0:(r=e.string.length/t.length,0===o&&(r+=.5),r*n)):0},U=(t,e)=>{var n=t[e];if("function"==typeof n)return n;n&&!Array.isArray(n)&&(t[e]=[n])},G=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},Q=(t,e)=>"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=j(t+"").toLowerCase())>(e=j(e+"").toLowerCase())?1:e>t?-1:0;class W{items;settings;constructor(t,e){this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,n){if(!t||!t.length)return[];const r=[],o=t.split(/\s+/);var i;return n&&(i=new RegExp("^("+Object.keys(n).map(S).join("|")+"):(.*)$")),o.forEach((t=>{let n,o=null,s=null;i&&(n=t.match(i))&&(o=n[1],t=n[2]),t.length>0&&(s=this.settings.diacritics?(t=>{void 0===E&&(E=M(L)),t=j(t);let e="",n=[new z];for(let r=0;r<t.length;r++){let o=t.substring(r).match(F);const i=t.substring(r,r+1),s=o?o[0]:null;let a=[],l=new Set;for(const t of n){const e=t.last();if(!e||1==e.length||e.end<=r)if(s){const e=s.length;t.add({start:r,end:r+e,length:e,substr:s}),l.add("1")}else t.add({start:r,end:r+1,length:1,substr:i}),l.add("2");else if(s){let n=t.clone(r,e);const o=s.length;n.add({start:r,end:r+o,length:o,substr:s}),a.push(n)}else l.add("3")}if(a.length>0){a=a.sort(((t,e)=>t.length()-e.length()));for(let t of a)V(t,n)||n.push(t)}else if(r>0&&1==l.size&&!l.has("3")){e+=H(n,!1);let t=new z;const r=n[0];r&&t.add(r.last()),n=[t]}}return e+=H(n,!0),e})(t)||null:S(t),s&&e&&(s="\\b"+s)),r.push({string:t,regex:s?new RegExp(s,"iu"):null,field:o})})),r}getScoreFunction(t,e){var n=this.prepareSearch(t,e);return this._getScoreFunction(n)}_getScoreFunction(t){const e=t.tokens,n=e.length;if(!n)return function(){return 0};const r=t.options.fields,o=t.weights,i=r.length,s=t.getAttrFn;if(!i)return function(){return 1};const a=1===i?function(t,e){const n=r[0].field;return K(s(e,n),t,o[n]||1)}:function(t,e){var n=0;if(t.field){const r=s(e,t.field);!t.regex&&r?n+=1/i:n+=K(r,t,1)}else G(o,((r,o)=>{n+=K(s(e,o),t,r)}));return n/i};return 1===n?function(t){return a(e[0],t)}:"and"===t.options.conjunction?function(t){var r,o=0;for(let n of e){if((r=a(n,t))<=0)return 0;o+=r}return o/n}:function(t){var r=0;return G(e,(e=>{r+=a(e,t)})),r/n}}getSortFunction(t,e){var n=this.prepareSearch(t,e);return this._getSortFunction(n)}_getSortFunction(t){var e,n=[];const r=this,o=t.options,i=!t.query&&o.sort_empty?o.sort_empty:o.sort;if("function"==typeof i)return i.bind(this);const s=function(e,n){return"$score"===e?n.score:t.getAttrFn(r.items[n.id],e)};if(i)for(let e of i)(t.query||"$score"!==e.field)&&n.push(e);if(t.query){e=!0;for(let t of n)if("$score"===t.field){e=!1;break}e&&n.unshift({field:"$score",direction:"desc"})}else n=n.filter((t=>"$score"!==t.field));return n.length?function(t,e){var r,o;for(let i of n)if(o=i.field,r=("desc"===i.direction?-1:1)*Q(s(o,t),s(o,e)))return r;return 0}:null}prepareSearch(t,e){const n={};var r=Object.assign({},e);if(U(r,"sort"),U(r,"sort_empty"),r.fields){U(r,"fields");const t=[];r.fields.forEach((e=>{"string"==typeof e&&(e={field:e,weight:1}),t.push(e),n[e.field]="weight"in e?e.weight:1})),r.fields=t}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:r.nesting?B:R}}search(t,e){var n,r,o=this;r=this.prepareSearch(t,e),e=r.options,t=r.query;const i=e.score||o._getScoreFunction(r);t.length?G(o.items,((t,o)=>{n=i(t),(!1===e.filter||n>0)&&r.items.push({score:n,id:o})})):G(o.items,((t,e)=>{r.items.push({score:1,id:e})}));const s=o._getSortFunction(r);return s&&r.items.sort(s),r.total=r.items.length,"number"==typeof e.limit&&(r.items=r.items.slice(0,e.limit)),r}}const J=t=>null==t?null:Y(t),Y=t=>"boolean"==typeof t?t?"1":"0":t+"",X=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Z=(t,e)=>{var n;return function(r,o){var i=this;n&&(i.loading=Math.max(i.loading-1,0),clearTimeout(n)),n=setTimeout((function(){n=null,i.loadedSearches[r]=!0,t.call(i,r,o)}),e)}},tt=(t,e,n)=>{var r,o=t.trigger,i={};for(r of(t.trigger=function(){var n=arguments[0];if(-1===e.indexOf(n))return o.apply(t,arguments);i[n]=arguments},n.apply(t,[]),t.trigger=o,e))r in i&&o.apply(t,i[r])},et=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},nt=(t,e,n,r)=>{t.addEventListener(e,n,r)},rt=(t,e)=>!!e&&!!e[t]&&1==(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0),ot=(t,e)=>t.getAttribute("id")||(t.setAttribute("id",e),e),it=t=>t.replace(/[\\"']/g,"\\$&"),st=(t,e)=>{e&&t.append(e)},at=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},lt=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(dt(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},dt=t=>"string"==typeof t&&t.indexOf("<")>-1,ct=(t,e)=>{var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!1),t.dispatchEvent(n)},pt=(t,e)=>{Object.assign(t.style,e)},ut=(t,...e)=>{var n=gt(e);(t=mt(t)).map((t=>{n.map((e=>{t.classList.add(e)}))}))},ht=(t,...e)=>{var n=gt(e);(t=mt(t)).map((t=>{n.map((e=>{t.classList.remove(e)}))}))},gt=t=>{var e=[];return at(t,(t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))})),e.filter(Boolean)},mt=t=>(Array.isArray(t)||(t=[t]),t),ft=(t,e,n)=>{if(!n||n.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},vt=(t,e=0)=>e>0?t[t.length-1]:t[0],bt=(t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var n=0;t=t.previousElementSibling;)t.matches(e)&&n++;return n},yt=(t,e)=>{at(e,((e,n)=>{null==e?t.removeAttribute(n):t.setAttribute(n,""+e)}))},wt=(t,e)=>{t.parentNode&&t.parentNode.replaceChild(e,t)},xt="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",Ot={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};function _t(t,e){var n=Object.assign({},Ot,e),r=n.dataAttr,o=n.labelField,i=n.valueField,s=n.disabledField,a=n.optgroupField,l=n.optgroupLabelField,d=n.optgroupValueField,c=t.tagName.toLowerCase(),p=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!p&&!n.allowEmptyOption){let e=t.querySelector('option[value=""]');e&&(p=e.textContent)}var u={placeholder:p,options:[],optgroups:[],items:[],maxItems:null};return"select"===c?(()=>{var e,c=u.options,p={},h=1;let g=0;var m=t=>{var e=Object.assign({},t.dataset),n=r&&e[r];return"string"==typeof n&&n.length&&(e=Object.assign(e,JSON.parse(n))),e},f=(t,e)=>{var r=J(t.value);if(null!=r&&(r||n.allowEmptyOption)){if(p.hasOwnProperty(r)){if(e){var l=p[r][a];l?Array.isArray(l)?l.push(e):p[r][a]=[l,e]:p[r][a]=e}}else{var d=m(t);d[o]=d[o]||t.textContent,d[i]=d[i]||r,d[s]=d[s]||t.disabled,d[a]=d[a]||e,d.$option=t,d.$order=d.$order||++g,p[r]=d,c.push(d)}t.selected&&u.items.push(r)}};u.maxItems=t.hasAttribute("multiple")?null:1,at(t.children,(t=>{var n,r,o;"optgroup"===(e=t.tagName.toLowerCase())?((o=m(n=t))[l]=o[l]||n.getAttribute("label")||"",o[d]=o[d]||h++,o[s]=o[s]||n.disabled,o.$order=o.$order||++g,u.optgroups.push(o),r=o[d],at(n.children,(t=>{f(t,r)}))):"option"===e&&f(t)}))})():(()=>{const e=t.getAttribute(r);if(e)u.options=JSON.parse(e),at(u.options,(t=>{u.items.push(t[i])}));else{var s=t.value.trim()||"";if(!n.allowEmptyOption&&!s.length)return;const e=s.split(n.delimiter);at(e,(t=>{const e={};e[o]=t,e[i]=t,u.options.push(e)})),u.items=e}})(),Object.assign({},Ot,u,e)}var At=0;class St extends(function(t){return t.plugins={},class extends t{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,n){t.plugins[e]={name:e,fn:n}}initializePlugins(t){var e,n;const r=this,o=[];if(Array.isArray(t))t.forEach((t=>{"string"==typeof t?o.push(t):(r.plugins.settings[t.name]=t.options,o.push(t.name))}));else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],o.push(e));for(;n=o.shift();)r.require(n)}loadPlugin(e){var n=this,r=n.plugins,o=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');r.requested[e]=!0,r.loaded[e]=o.fn.apply(n,[n.plugins.settings[e]||{}]),r.names.push(e)}require(t){var e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]}}}(w)){constructor(t,e){var n;super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,At++;var r=lt(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this,n=(window.getComputedStyle&&window.getComputedStyle(r,null)).getPropertyValue("direction");const o=_t(r,e);this.settings=o,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag="select"===r.tagName.toLowerCase(),this.rtl=/rtl/i.test(n),this.inputId=ot(r,"tomselect-"+At),this.isRequired=r.required,this.sifter=new W(this.options,{diacritics:o.diacritics}),o.mode=o.mode||(1===o.maxItems?"single":"multi"),"boolean"!=typeof o.hideSelected&&(o.hideSelected="multi"===o.mode),"boolean"!=typeof o.hidePlaceholder&&(o.hidePlaceholder="multi"!==o.mode);var i=o.createFilter;"function"!=typeof i&&("string"==typeof i&&(i=new RegExp(i)),i instanceof RegExp?o.createFilter=t=>i.test(t):o.createFilter=t=>this.settings.duplicates||!this.options[t]),this.initializePlugins(o.plugins),this.setupCallbacks(),this.setupTemplates();const s=lt("<div>"),a=lt("<div>"),l=this._render("dropdown"),d=lt('<div role="listbox" tabindex="-1">'),c=this.input.getAttribute("class")||"",p=o.mode;var u;ut(s,o.wrapperClass,c,p),ut(a,o.controlClass),st(s,a),ut(l,o.dropdownClass,p),o.copyClassesToDropdown&&ut(l,c),ut(d,o.dropdownContentClass),st(l,d),lt(o.dropdownParent||s).appendChild(l),dt(o.controlInput)?(u=lt(o.controlInput),at(["autocorrect","autocapitalize","autocomplete","spellcheck"],(t=>{r.getAttribute(t)&&yt(u,{[t]:r.getAttribute(t)})})),u.tabIndex=-1,a.appendChild(u),this.focus_node=u):o.controlInput?(u=lt(o.controlInput),this.focus_node=u):(u=lt("<input/>"),this.focus_node=a),this.wrapper=s,this.dropdown=l,this.dropdown_content=d,this.control=a,this.control_input=u,this.setup()}setup(){const t=this,e=t.settings,n=t.control_input,r=t.dropdown,o=t.dropdown_content,i=t.wrapper,s=t.control,a=t.input,l=t.focus_node,d={passive:!0},c=t.inputId+"-ts-dropdown";yt(o,{id:c}),yt(l,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":c});const p=ot(l,t.inputId+"-ts-control"),u="label[for='"+(t=>t.replace(/['"\\]/g,"\\$&"))(t.inputId)+"']",h=document.querySelector(u),g=t.focus.bind(t);if(h){nt(h,"click",g),yt(h,{for:p});const e=ot(h,t.inputId+"-ts-label");yt(l,{"aria-labelledby":e}),yt(o,{"aria-labelledby":e})}if(i.style.width=a.style.width,t.plugins.names.length){const e="plugin-"+t.plugins.names.join(" plugin-");ut([i,r],e)}(null===e.maxItems||e.maxItems>1)&&t.is_select_tag&&yt(a,{multiple:"multiple"}),e.placeholder&&yt(n,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+S(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=Z(e.load,e.loadThrottle)),nt(r,"mousemove",(()=>{t.ignoreHover=!1})),nt(r,"mouseenter",(e=>{var n=ft(e.target,"[data-selectable]",r);n&&t.onOptionHover(e,n)}),{capture:!0}),nt(r,"click",(e=>{const n=ft(e.target,"[data-selectable]");n&&(t.onOptionSelect(e,n),et(e,!0))})),nt(s,"click",(e=>{var r=ft(e.target,"[data-ts-item]",s);r&&t.onItemSelect(e,r)?et(e,!0):""==n.value&&(t.onClick(),et(e,!0))})),nt(l,"keydown",(e=>t.onKeyDown(e))),nt(n,"keypress",(e=>t.onKeyPress(e))),nt(n,"input",(e=>t.onInput(e))),nt(l,"blur",(e=>t.onBlur(e))),nt(l,"focus",(e=>t.onFocus(e))),nt(n,"paste",(e=>t.onPaste(e)));const m=e=>{const o=e.composedPath()[0];if(!i.contains(o)&&!r.contains(o))return t.isFocused&&t.blur(),void t.inputState();o==n&&t.isOpen?e.stopPropagation():et(e,!0)},f=()=>{t.isOpen&&t.positionDropdown()};nt(document,"mousedown",m),nt(window,"scroll",f,d),nt(window,"resize",f,d),this._destroy=()=>{document.removeEventListener("mousedown",m),window.removeEventListener("scroll",f),window.removeEventListener("resize",f),h&&h.removeEventListener("click",g)},this.revertSettings={innerHTML:a.innerHTML,tabIndex:a.tabIndex},a.tabIndex=-1,a.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,nt(a,"invalid",(()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())})),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,a.disabled?t.disable():a.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),ut(a,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),!0===e.preload&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),at(e,(t=>{this.registerOptionGroup(t)}))}setupTemplates(){var t=this,e=t.settings.labelField,n=t.settings.optgroupLabelField,r={optgroup:t=>{let e=document.createElement("div");return e.className="optgroup",e.appendChild(t.options),e},optgroup_header:(t,e)=>'<div class="optgroup-header">'+e(t[n])+"</div>",option:(t,n)=>"<div>"+n(t[e])+"</div>",item:(t,n)=>"<div>"+n(t[e])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)(e=this.settings[n[t]])&&this.on(t,e)}sync(t=!0){const e=this,n=t?_t(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(n.options,n.optgroups),e.setValue(n.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0)return t.clearActiveItems(),void t.focus();t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){ct(this.input,"input"),ct(this.input,"change")}onPaste(t){var e=this;e.isInputHidden||e.isLocked?et(t):e.settings.splitOn&&setTimeout((()=>{var t=e.inputValue();if(t.match(e.settings.splitOn)){var n=t.trim().split(e.settings.splitOn);at(n,(t=>{J(t)&&(this.options[t]?e.addItem(t):e.createItem(t))}))}}),0)}onKeyPress(t){var e=this;if(!e.isLocked){var n=String.fromCharCode(t.keyCode||t.which);return e.settings.create&&"multi"===e.settings.mode&&n===e.settings.delimiter?(e.createItem(),void et(t)):void 0}et(t)}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked)9!==t.keyCode&&et(t);else{switch(t.keyCode){case 65:if(rt(xt,t)&&""==e.control_input.value)return et(t),void e.selectAll();break;case 27:return e.isOpen&&(et(t,!0),e.close()),void e.clearActiveItems();case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let t=e.getAdjacent(e.activeOption,1);t&&e.setActiveOption(t)}return void et(t);case 38:if(e.activeOption){let t=e.getAdjacent(e.activeOption,-1);t&&e.setActiveOption(t)}return void et(t);case 13:return void(e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),et(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&et(t));case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return void(e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),et(t)),e.settings.create&&e.createItem()&&et(t)));case 8:case 46:return void e.deleteSelection(t)}e.isInputHidden&&!rt(xt,t)&&et(t)}}onInput(t){if(this.isLocked)return;const e=this.inputValue();var n,r;this.lastValue!==e&&(this.lastValue=e,""!=e?(this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=(n=()=>{this.refreshTimeout=null,this._onInput()},(r=this.settings.refreshThrottle)>0?window.setTimeout(n,r):(n.call(null),null))):this._onInput())}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,n=e.isFocused;if(e.isDisabled||e.isReadOnly)return e.blur(),void et(t);e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.preload(),n||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(!1!==document.hasFocus()){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var n=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,n):n()}}}onOptionSelect(t,e){var n,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,(()=>{r.settings.closeAfterSelect&&r.close()})):void 0!==(n=e.dataset.value)&&(r.lastQuery=null,r.addItem(n),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e)))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var n=this;return!n.isLocked&&"multi"===n.settings.mode&&(et(t),n.setActiveItem(e,t),!0)}canLoad(t){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(t)}load(t){const e=this;if(!e.canLoad(t))return;ut(e.wrapper,e.settings.loadingClass),e.loading++;const n=e.loadCallback.bind(e);e.settings.load.call(e,t,n)}loadCallback(t,e){const n=this;n.loading=Math.max(n.loading-1,0),n.lastQuery=null,n.clearActiveOption(),n.setupOptions(t,e),n.refreshOptions(n.isFocused&&!n.isInputHidden),n.loading||ht(n.wrapper,n.settings.loadingClass),n.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input;e.value!==t&&(e.value=t,ct(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){tt(this,e?[]:["change"],(()=>{this.clear(e),this.addItems(t,e)}))}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var n,r,o,i,s,a,l=this;if("single"!==l.settings.mode){if(!t)return l.clearActiveItems(),void(l.isFocused&&l.inputState());if("click"===(n=e&&e.type.toLowerCase())&&rt("shiftKey",e)&&l.activeItems.length){for(a=l.getLastActive(),(o=Array.prototype.indexOf.call(l.control.children,a))>(i=Array.prototype.indexOf.call(l.control.children,t))&&(s=o,o=i,i=s),r=o;r<=i;r++)t=l.control.children[r],-1===l.activeItems.indexOf(t)&&l.setActiveItemClass(t);et(e)}else"click"===n&&rt(xt,e)||"keydown"===n&&rt("shiftKey",e)?t.classList.contains("active")?l.removeActiveItem(t):l.setActiveItemClass(t):(l.clearActiveItems(),l.setActiveItemClass(t));l.inputState(),l.isFocused||l.focus()}}setActiveItemClass(t){const e=this,n=e.control.querySelector(".last-active");n&&ht(n,"last-active"),ut(t,"active last-active"),e.trigger("item_select",t),-1==e.activeItems.indexOf(t)&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),ht(t,"active")}clearActiveItems(){ht(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,yt(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),yt(t,{"aria-selected":"true"}),ut(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const n=this.dropdown_content,r=n.clientHeight,o=n.scrollTop||0,i=t.offsetHeight,s=t.getBoundingClientRect().top-n.getBoundingClientRect().top+o;s+i>r+o?this.scroll(s-r+i,e):s<o&&this.scroll(s,e)}scroll(t,e){const n=this.dropdown_content;e&&(n.style.scrollBehavior=e),n.scrollTop=t,n.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(ht(this.activeOption,"active"),yt(this.activeOption,{"aria-selected":null})),this.activeOption=null,yt(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if("single"===t.settings.mode)return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,at(e,(e=>{t.setActiveItemClass(e)})))}inputState(){var t=this;t.control.contains(t.control_input)&&(yt(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&yt(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout((()=>{t.ignoreFocus=!1,t.onFocus()}),0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return"string"==typeof t.sortField&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,n,r=this,o=this.getSearchOptions();if(r.settings.score&&"function"!=typeof(n=r.settings.score.call(r,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(o,{score:n})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter((t=>{let e=J(t.id);return!(e&&-1!==r.items.indexOf(e))}))),e}refreshOptions(t=!0){var e,n,r,o,i,s,a,l,d,c;const p={},u=[];var h=this,g=h.inputValue();const m=g===h.lastQuery||""==g&&null==h.lastQuery;var f=h.search(g),v=null,b=h.settings.shouldOpen||!1,y=h.dropdown_content;m&&(v=h.activeOption)&&(d=v.closest("[data-group]")),o=f.items.length,"number"==typeof h.settings.maxOptions&&(o=Math.min(o,h.settings.maxOptions)),o>0&&(b=!0);const w=(t,e)=>{let n=p[t];if(void 0!==n){let t=u[n];if(void 0!==t)return[n,t.fragment]}let r=document.createDocumentFragment();return n=u.length,u.push({fragment:r,order:e,optgroup:t}),[n,r]};for(e=0;e<o;e++){let t=f.items[e];if(!t)continue;let o=t.id,a=h.options[o];if(void 0===a)continue;let l=Y(o),c=h.getOption(l,!0);for(h.settings.hideSelected||c.classList.toggle("selected",h.items.includes(l)),i=a[h.settings.optgroupField]||"",n=0,r=(s=Array.isArray(i)?i:[i])&&s.length;n<r;n++){i=s[n];let t=a.$order,e=h.optgroups[i];void 0===e?i="":t=e.$order;const[r,l]=w(i,t);n>0&&(c=c.cloneNode(!0),yt(c,{id:a.$id+"-clone-"+n,"aria-selected":null}),c.classList.add("ts-cloned"),ht(c,"active"),h.activeOption&&h.activeOption.dataset.value==o&&d&&d.dataset.group===i.toString()&&(v=c)),l.appendChild(c),""!=i&&(p[i]=r)}}var x;h.settings.lockOptgroupOrder&&u.sort(((t,e)=>t.order-e.order)),a=document.createDocumentFragment(),at(u,(t=>{let e=t.fragment,n=t.optgroup;if(!e||!e.children.length)return;let r=h.optgroups[n];if(void 0!==r){let t=document.createDocumentFragment(),n=h.render("optgroup_header",r);st(t,n),st(t,e);let o=h.render("optgroup",{group:r,options:t});st(a,o)}else st(a,e)})),y.innerHTML="",st(y,a),h.settings.highlight&&(x=y.querySelectorAll("span.highlight"),Array.prototype.forEach.call(x,(function(t){var e=t.parentNode;e.replaceChild(t.firstChild,t),e.normalize()})),f.query.length&&f.tokens.length&&at(f.tokens,(t=>{((t,e)=>{if(null===e)return;if("string"==typeof e){if(!e.length)return;e=new RegExp(e,"i")}const n=t=>3===t.nodeType?(t=>{var n=t.data.match(e);if(n&&t.data.length>0){var r=document.createElement("span");r.className="highlight";var o=t.splitText(n.index);o.splitText(n[0].length);var i=o.cloneNode(!0);return r.appendChild(i),wt(o,r),1}return 0})(t):((t=>{1!==t.nodeType||!t.childNodes||/(script|style)/i.test(t.tagName)||"highlight"===t.className&&"SPAN"===t.tagName||Array.from(t.childNodes).forEach((t=>{n(t)}))})(t),0);n(t)})(y,t.regex)})));var O=t=>{let e=h.render(t,{input:g});return e&&(b=!0,y.insertBefore(e,y.firstChild)),e};if(h.loading?O("loading"):h.settings.shouldLoad.call(h,g)?0===f.items.length&&O("no_results"):O("not_loading"),(l=h.canCreate(g))&&(c=O("option_create")),h.hasOptions=f.items.length>0||l,b){if(f.items.length>0){if(v||"single"!==h.settings.mode||null==h.items[0]||(v=h.getOption(h.items[0])),!y.contains(v)){let t=0;c&&!h.settings.addPrecedence&&(t=1),v=h.selectable()[t]}}else c&&(v=c);t&&!h.isOpen&&(h.open(),h.scrollToOption(v,"auto")),h.setActiveOption(v)}else h.clearActiveOption(),t&&h.isOpen&&h.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const n=this;if(Array.isArray(t))return n.addOptions(t,e),!1;const r=J(t[n.settings.valueField]);return null!==r&&!n.options.hasOwnProperty(r)&&(t.$order=t.$order||++n.order,t.$id=n.inputId+"-opt-"+t.$order,n.options[r]=t,n.lastQuery=null,e&&(n.userOptions[r]=e,n.trigger("option_add",r,t)),r)}addOptions(t,e=!1){at(t,(t=>{this.addOption(t,e)}))}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=J(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var n;e[this.settings.optgroupValueField]=t,(n=this.registerOptionGroup(e))&&this.trigger("optgroup_add",n,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const n=this;var r,o;const i=J(t),s=J(e[n.settings.valueField]);if(null===i)return;const a=n.options[i];if(null==a)return;if("string"!=typeof s)throw new Error("Value must be set in option data");const l=n.getOption(i),d=n.getItem(i);if(e.$order=e.$order||a.$order,delete n.options[i],n.uncacheValue(s),n.options[s]=e,l){if(n.dropdown_content.contains(l)){const t=n._render("option",e);wt(l,t),n.activeOption===l&&n.setActiveOption(t)}l.remove()}d&&(-1!==(o=n.items.indexOf(i))&&n.items.splice(o,1,s),r=n._render("item",e),d.classList.contains("active")&&ut(r,"active"),wt(d,r)),n.lastQuery=null}removeOption(t,e){const n=this;t=Y(t),n.uncacheValue(t),delete n.userOptions[t],delete n.options[t],n.lastQuery=null,n.trigger("option_remove",t),n.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const n={};at(this.options,((t,r)=>{e(t,r)&&(n[r]=t)})),this.options=this.sifter.items=n,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const n=J(t);if(null===n)return null;const r=this.options[n];if(null!=r){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,n="option"){var r;if(!t)return null;r="item"==n?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let n=0;n<r.length;n++)if(r[n]==t)return e>0?r[n+1]:r[n-1];return null}getItem(t){if("object"==typeof t)return t;var e=J(t);return null!==e?this.control.querySelector(`[data-value="${it(e)}"]`):null}addItems(t,e){var n=this,r=Array.isArray(t)?t:[t];const o=(r=r.filter((t=>-1===n.items.indexOf(t))))[r.length-1];r.forEach((t=>{n.isPending=t!==o,n.addItem(t,e)}))}addItem(t,e){tt(this,e?[]:["change","dropdown_close"],(()=>{var n,r;const o=this,i=o.settings.mode,s=J(t);if((!s||-1===o.items.indexOf(s)||("single"===i&&o.close(),"single"!==i&&o.settings.duplicates))&&null!==s&&o.options.hasOwnProperty(s)&&("single"===i&&o.clear(e),"multi"!==i||!o.isFull())){if(n=o._render("item",o.options[s]),o.control.contains(n)&&(n=n.cloneNode(!0)),r=o.isFull(),o.items.splice(o.caretPos,0,s),o.insertAtCaret(n),o.isSetup){if(!o.isPending&&o.settings.hideSelected){let t=o.getOption(s),e=o.getAdjacent(t,1);e&&o.setActiveOption(e)}o.isPending||o.settings.closeAfterSelect||o.refreshOptions(o.isFocused&&"single"!==i),0!=o.settings.closeAfterSelect&&o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",s,n),o.isPending||o.updateOriginalInput({silent:e})}(!o.isPending||!r&&o.isFull())&&(o.inputState(),o.refreshState())}}))}removeItem(t=null,e){const n=this;if(!(t=n.getItem(t)))return;var r,o;const i=t.dataset.value;r=bt(t),t.remove(),t.classList.contains("active")&&(o=n.activeItems.indexOf(t),n.activeItems.splice(o,1),ht(t,"active")),n.items.splice(r,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(i)&&n.removeOption(i,e),r<n.caretPos&&n.setCaret(n.caretPos-1),n.updateOriginalInput({silent:e}),n.refreshState(),n.positionDropdown(),n.trigger("item_remove",i,t)}createItem(t=null,e=()=>{}){3===arguments.length&&(e=arguments[2]),"function"!=typeof e&&(e=()=>{});var n,r=this,o=r.caretPos;if(t=t||r.inputValue(),!r.canCreate(t))return e(),!1;r.lock();var i=!1,s=t=>{if(r.unlock(),!t||"object"!=typeof t)return e();var n=J(t[r.settings.valueField]);if("string"!=typeof n)return e();r.setTextboxValue(),r.addOption(t,!0),r.setCaret(o),r.addItem(n),e(t),i=!0};return n="function"==typeof r.settings.create?r.settings.create.call(this,t,s):{[r.settings.labelField]:t,[r.settings.valueField]:t},i||s(n),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),n=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const r=t.wrapper.classList;var o;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",n),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",(o=t.options,0===Object.keys(o).length)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var n,r;const o=e.input.querySelector('option[value=""]');if(e.is_select_tag){const i=[],s=e.input.querySelectorAll("option:checked").length;function a(t,n,r){return t||(t=lt('<option value="'+X(n)+'">'+X(r)+"</option>")),t!=o&&e.input.append(t),i.push(t),(t!=o||s>0)&&(t.selected=!0),t}e.input.querySelectorAll("option:checked").forEach((t=>{t.selected=!1})),0==e.items.length&&"single"==e.settings.mode?a(o,"",""):e.items.forEach((t=>{n=e.options[t],r=n[e.settings.labelField]||"",i.includes(n.$option)?a(e.input.querySelector(`option[value="${it(t)}"]:not(:checked)`),t,r):n.$option=a(n.$option,t,r)}))}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.isOpen=!0,yt(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),pt(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),pt(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,n=e.isOpen;t&&(e.setTextboxValue(),"single"===e.settings.mode&&e.items.length&&e.inputState()),e.isOpen=!1,yt(e.focus_node,{"aria-expanded":"false"}),pt(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),n&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),n=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;pt(this.dropdown,{width:e.width+"px",top:n+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var n=e.controlChildren();at(n,(t=>{e.removeItem(t,!0)})),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,n=e.caretPos,r=e.control;r.insertBefore(t,r.children[n]||null),e.setCaret(n+1)}deleteSelection(t){var e,n,r,o,i,s=this;e=t&&8===t.keyCode?-1:1,n={start:(i=s.control_input).selectionStart||0,length:(i.selectionEnd||0)-(i.selectionStart||0)};const a=[];if(s.activeItems.length)o=vt(s.activeItems,e),r=bt(o),e>0&&r++,at(s.activeItems,(t=>a.push(t)));else if((s.isFocused||"single"===s.settings.mode)&&s.items.length){const t=s.controlChildren();let r;e<0&&0===n.start&&0===n.length?r=t[s.caretPos-1]:e>0&&n.start===s.inputValue().length&&(r=t[s.caretPos]),void 0!==r&&a.push(r)}if(!s.shouldDelete(a,t))return!1;for(et(t,!0),void 0!==r&&s.setCaret(r);a.length;)s.removeItem(a.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(t,e){const n=t.map((t=>t.dataset.value));return!(!n.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete(n,e))}advanceSelection(t,e){var n,r,o=this;o.rtl&&(t*=-1),o.inputValue().length||(rt(xt,e)||rt("shiftKey",e)?(r=(n=o.getLastActive(t))?n.classList.contains("active")?o.getAdjacent(n,t,"item"):n:t>0?o.control_input.nextElementSibling:o.control_input.previousElementSibling)&&(r.classList.contains("active")&&o.removeActiveItem(n),o.setActiveItemClass(r)):o.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var n=this.control.querySelectorAll(".active");return n?vt(n,t):void 0}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,ht(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var n,r;const o=this;if("function"!=typeof this.settings.render[t])return null;if(!(r=o.settings.render[t].call(this,e,X)))return null;if(r=lt(r),"option"===t||"option_create"===t?e[o.settings.disabledField]?yt(r,{"aria-disabled":"true"}):yt(r,{"data-selectable":""}):"optgroup"===t&&(n=e.group[o.settings.optgroupValueField],yt(r,{"data-group":n}),e.group[o.settings.disabledField]&&yt(r,{"data-disabled":""})),"option"===t||"item"===t){const n=Y(e[o.settings.valueField]);yt(r,{"data-value":n}),"item"===t?(ut(r,o.settings.itemClass),yt(r,{"data-ts-item":""})):(ut(r,o.settings.optionClass),yt(r,{role:"option",id:e.$id}),e.$div=r,o.options[n]=e)}return r}_render(t,e){const n=this.render(t,e);if(null==n)throw"HTMLElement expected";return n}clearCache(){at(this.options,(t=>{t.$div&&(t.$div.remove(),delete t.$div)}))}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,n){var r=this,o=r[e];r[e]=function(){var e,i;return"after"===t&&(e=o.apply(r,arguments)),i=n.apply(r,arguments),"instead"===t?i:("before"===t&&(e=o.apply(r,arguments)),e)}}}const kt=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},Ct=(t,e,n,r)=>{t.addEventListener(e,n,r)},It=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(Lt(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},Lt=t=>"string"==typeof t&&t.indexOf("<")>-1,Et=(t,e,n,r)=>{t.addEventListener(e,n,r)},Ft=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},Tt=(t,e,n,r)=>{t.addEventListener(e,n,r)},Pt=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(qt(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},qt=t=>"string"==typeof t&&t.indexOf("<")>-1;St.define("change_listener",(function(){((t,e,n)=>{this.input.addEventListener("change",n,void 0)})(0,0,(()=>{this.sync()}))})),St.define("checkbox_options",(function(t){var e=this,n=e.onOptionSelect;e.settings.hideSelected=!1;const r=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},t);var o=function(t,e){e?(t.checked=!0,r.uncheckedClassNames&&t.classList.remove(...r.uncheckedClassNames),r.checkedClassNames&&t.classList.add(...r.checkedClassNames)):(t.checked=!1,r.checkedClassNames&&t.classList.remove(...r.checkedClassNames),r.uncheckedClassNames&&t.classList.add(...r.uncheckedClassNames))},i=function(t){setTimeout((()=>{var e=t.querySelector("input."+r.className);e instanceof HTMLInputElement&&o(e,t.classList.contains("selected"))}),1)};e.hook("after","setupTemplates",(()=>{var t=e.settings.render.option;e.settings.render.option=(n,i)=>{var s=(t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if("string"==typeof(n=t)&&n.indexOf("<")>-1){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}var n;return document.querySelector(t)})(t.call(e,n,i)),a=document.createElement("input");r.className&&a.classList.add(r.className),a.addEventListener("click",(function(t){kt(t)})),a.type="checkbox";const l=null==(d=n[e.settings.valueField])?null:(t=>"boolean"==typeof t?t?"1":"0":t+"")(d);var d;return o(a,!!(l&&e.items.indexOf(l)>-1)),s.prepend(a),s}})),e.on("item_remove",(t=>{var n=e.getOption(t);n&&(n.classList.remove("selected"),i(n))})),e.on("item_add",(t=>{var n=e.getOption(t);n&&i(n)})),e.hook("instead","onOptionSelect",((t,r)=>{if(r.classList.contains("selected"))return r.classList.remove("selected"),e.removeItem(r.dataset.value),e.refreshOptions(),void kt(t,!0);n.call(e,t,r),i(r)}))})),St.define("clear_button",(function(t){const e=this,n=Object.assign({className:"clear-button",title:"Clear All",html:t=>`<div class="${t.className}" title="${t.title}">&#10799;</div>`},t);e.on("initialize",(()=>{var t=(t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if("string"==typeof(n=t)&&n.indexOf("<")>-1){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}var n;return document.querySelector(t)})(n.html(n));t.addEventListener("click",(t=>{e.isLocked||(e.clear(),"single"===e.settings.mode&&e.settings.allowEmptyOption&&e.addItem(""),t.preventDefault(),t.stopPropagation())})),e.control.appendChild(t)}))})),St.define("drag_drop",(function(){var t=this;if("multi"!==t.settings.mode)return;var e=t.lock,n=t.unlock;let r,o=!0;t.hook("after","setupTemplates",(()=>{var e=t.settings.render.item;t.settings.render.item=(n,i)=>{const s=(t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if("string"==typeof(n=t)&&n.indexOf("<")>-1){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}var n;return document.querySelector(t)})(e.call(t,n,i));var a;a=s,((t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)})({draggable:"true"},((t,e)=>{null==t?a.removeAttribute(e):a.setAttribute(e,""+t)}));const l=t=>{t.preventDefault(),s.classList.add("ts-drag-over"),d(s,r)},d=(t,e)=>{var n,r,o;void 0!==e&&(((t,e)=>{do{var n;if(t==(e=null==(n=e)?void 0:n.previousElementSibling))return!0}while(e&&e.previousElementSibling);return!1})(e,s)?(r=e,null==(o=(n=t).parentNode)||o.insertBefore(r,n.nextSibling)):((t,e)=>{var n;null==(n=t.parentNode)||n.insertBefore(e,t)})(t,e))};return Ct(s,"mousedown",(t=>{o||((t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())})(t),t.stopPropagation()})),Ct(s,"dragstart",(t=>{r=s,setTimeout((()=>{s.classList.add("ts-dragging")}),0)})),Ct(s,"dragenter",l),Ct(s,"dragover",l),Ct(s,"dragleave",(()=>{s.classList.remove("ts-drag-over")})),Ct(s,"dragend",(()=>{var e;document.querySelectorAll(".ts-drag-over").forEach((t=>t.classList.remove("ts-drag-over"))),null==(e=r)||e.classList.remove("ts-dragging"),r=void 0;var n=[];t.control.querySelectorAll("[data-value]").forEach((t=>{if(t.dataset.value){let e=t.dataset.value;e&&n.push(e)}})),t.setValue(n)})),s}})),t.hook("instead","lock",(()=>(o=!1,e.call(t)))),t.hook("instead","unlock",(()=>(o=!0,n.call(t))))})),St.define("dropdown_header",(function(t){const e=this,n=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:t=>'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a class="'+t.closeClass+'">&times;</a></div></div>'},t);e.on("initialize",(()=>{var t=(t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if("string"==typeof(n=t)&&n.indexOf("<")>-1){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}var n;return document.querySelector(t)})(n.html(n)),r=t.querySelector("."+n.closeClass);r&&r.addEventListener("click",(t=>{((t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())})(t,!0),e.close()})),e.dropdown.insertBefore(t,e.dropdown.firstChild)}))})),St.define("caret_position",(function(){var t=this;t.hook("instead","setCaret",(e=>{"single"!==t.settings.mode&&t.control.contains(t.control_input)?(e=Math.max(0,Math.min(t.items.length,e)))==t.caretPos||t.isPending||t.controlChildren().forEach(((n,r)=>{r<e?t.control_input.insertAdjacentElement("beforebegin",n):t.control.appendChild(n)})):e=t.items.length,t.caretPos=e})),t.hook("instead","moveCaret",(e=>{if(!t.isFocused)return;const n=t.getLastActive(e);if(n){const a=((t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var n=0;t=t.previousElementSibling;)t.matches(e)&&n++;return n})(n);t.setCaret(e>0?a+1:a),t.setActiveItem(),o=n,r=[],((t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n])})(["last-active"],(t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(r=r.concat(t))})),s=r.filter(Boolean),(i=o,Array.isArray(i)||(i=[i]),o=i).map((t=>{s.map((e=>{t.classList.remove(e)}))}))}else t.setCaret(t.caretPos+e);var r,o,i,s}))})),St.define("dropdown_input",(function(){const t=this;t.settings.shouldOpen=!0,t.hook("before","setup",(()=>{t.focus_node=t.control,((t,...e)=>{var n,r=(t=>{var e=[];return((t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n])})(t,(t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))})),e.filter(Boolean)})(e);(n=t,Array.isArray(n)||(n=[n]),t=n).map((t=>{r.map((e=>{t.classList.add(e)}))}))})(t.control_input,"dropdown-input");const e=It('<div class="dropdown-input-wrap">');e.append(t.control_input),t.dropdown.insertBefore(e,t.dropdown.firstChild);const n=It('<input class="items-placeholder" tabindex="-1" />');n.placeholder=t.settings.placeholder||"",t.control.append(n)})),t.on("initialize",(()=>{t.control_input.addEventListener("keydown",(e=>{switch(e.keyCode){case 27:return t.isOpen&&(((t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())})(e,!0),t.close()),void t.clearActiveItems();case 9:t.focus_node.tabIndex=-1}return t.onKeyDown.call(t,e)})),t.on("blur",(()=>{t.focus_node.tabIndex=t.isDisabled?-1:t.tabIndex})),t.on("dropdown_open",(()=>{t.control_input.focus()}));const e=t.onBlur;t.hook("instead","onBlur",(n=>{if(!n||n.relatedTarget!=t.control_input)return e.call(t)})),t.control_input.addEventListener("blur",(()=>t.onBlur()),void 0),t.hook("before","close",(()=>{t.isOpen&&t.focus_node.focus({preventScroll:!0})}))}))})),St.define("input_autogrow",(function(){var t=this;t.on("initialize",(()=>{var e=document.createElement("span"),n=t.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e);for(const t of["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"])e.style[t]=n.style[t];var r=()=>{e.textContent=n.value,n.style.width=e.clientWidth+"px"};r(),t.on("update item_add item_remove",r),Et(n,"input",r),Et(n,"keyup",r),Et(n,"blur",r),Et(n,"update",r)}))})),St.define("no_backspace_delete",(function(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",(n=>!!t.activeItems.length&&e.call(t,n)))})),St.define("no_active_items",(function(){this.hook("instead","setActiveItem",(()=>{})),this.hook("instead","selectAll",(()=>{}))})),St.define("optgroup_columns",(function(){var t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",(n=>{var r,o,i,s;if(!t.isOpen||37!==n.keyCode&&39!==n.keyCode)return e.call(t,n);t.ignoreHover=!0,s=(t=>{for(;t&&t.matches;){if(t.matches("[data-group]"))return t;t=t.parentNode}})(t.activeOption),r=((t,e)=>{if(!t)return-1;e=e||t.nodeName;for(var n=0;t=t.previousElementSibling;)t.matches(e)&&n++;return n})(t.activeOption,"[data-selectable]"),s&&(s=37===n.keyCode?s.previousSibling:s.nextSibling)&&(o=(i=s.querySelectorAll("[data-selectable]"))[Math.min(i.length-1,r)])&&t.setActiveOption(o)}))})),St.define("remove_button",(function(t){const e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var n=this;if(e.append){var r='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+(e.title+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'">'+e.label+"</a>";n.hook("after","setupTemplates",(()=>{var t=n.settings.render.item;n.settings.render.item=(e,o)=>{var i=Pt(t.call(n,e,o)),s=Pt(r);return i.appendChild(s),Tt(s,"mousedown",(t=>{Ft(t,!0)})),Tt(s,"click",(t=>{n.isLocked||(Ft(t,!0),n.isLocked||n.shouldDelete([i],t)&&(n.removeItem(i),n.refreshOptions(!1),n.inputState()))})),i}}))}})),St.define("restore_on_backspace",(function(t){const e=this,n=Object.assign({text:t=>t[e.settings.labelField]},t);e.on("item_remove",(function(t){if(e.isFocused&&""===e.control_input.value.trim()){var r=e.options[t];r&&e.setTextboxValue(n.text.call(e,r))}}))})),St.define("virtual_scroll",(function(){const t=this,e=t.canLoad,n=t.clearActiveOption,r=t.loadCallback;var o,i,s={},a=!1,l=[];if(t.settings.shouldLoadMore||(t.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(t.activeOption){var e=t.selectable();if(Array.from(e).indexOf(t.activeOption)>=e.length-2)return!0}return!1}),!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";t.settings.sortField=[{field:"$order"},{field:"$score"}];const d=e=>!("number"==typeof t.settings.maxOptions&&o.children.length>=t.settings.maxOptions||!(e in s)||!s[e]),c=(e,n)=>t.items.indexOf(n)>=0||l.indexOf(n)>=0;t.setNextUrl=(t,e)=>{s[t]=e},t.getUrl=e=>{if(e in s){const t=s[e];return s[e]=!1,t}return t.clearPagination(),t.settings.firstUrl.call(t,e)},t.clearPagination=()=>{s={}},t.hook("instead","clearActiveOption",(()=>{if(!a)return n.call(t)})),t.hook("instead","canLoad",(n=>n in s?d(n):e.call(t,n))),t.hook("instead","loadCallback",((e,n)=>{if(a){if(i){const n=e[0];void 0!==n&&(i.dataset.value=n[t.settings.valueField])}}else t.clearOptions(c);r.call(t,e,n),a=!1})),t.hook("after","refreshOptions",(()=>{const e=t.lastValue;var n;d(e)?(n=t.render("loading_more",{query:e}))&&(n.setAttribute("data-selectable",""),i=n):e in s&&!o.querySelector(".no-results")&&(n=t.render("no_more_results",{query:e})),n&&(((t,...e)=>{var n,r=(t=>{var e=[];return((t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n])})(t,(t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))})),e.filter(Boolean)})(e);(n=t,Array.isArray(n)||(n=[n]),t=n).map((t=>{r.map((e=>{t.classList.add(e)}))}))})(n,t.settings.optionClass),o.append(n))})),t.on("initialize",(()=>{l=Object.keys(t.options),o=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},t.settings.render),o.addEventListener("scroll",(()=>{t.settings.shouldLoadMore.call(t)&&d(t.lastValue)&&(a||(a=!0,t.load.call(t,t.lastValue)))}))}))}));const Nt=St;window.GBIAccountNav=class{constructor(t){this.container=document.querySelector(t),this.init()}init(){this.container.innerHTML='\n        <nav class="navbar">\n          <div class="search-container">\n            <div class="search-wrapper">\n              <select class="site-wide-search"> </select>\n              <div class="search-icon">\n                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">\n                  <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"></path>\n                </svg>\n              </div>\n            </div>\n          </div>\n          <div class="logged-out-actions" style="display: none;">\n            <button class="first-button">CREATE ACCOUNT</button>\n            <button class="second-button">LOGIN</button>\n          </div>\n          <div class="logged-in-actions" style="display: none;">\n              <button class="first-button">MY ACCOUNT</button>\n              <button class="second-button">LOGOUT</button>\n          </div>\n        </nav>\n        ',fetch("https://app.thegbi.org/resources/accounts/me/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then((t=>t.json())).then((t=>{t.email?(document.querySelector(".logged-in-actions").style.display="flex",document.querySelector(".logged-out-actions").style.display="none"):(document.querySelector(".logged-in-actions").style.display="none",document.querySelector(".logged-out-actions").style.display="flex")})).catch((t=>console.log("Authentication request failed",t))),function(){const t="https://app.thegbi.org",e=`${t}/search/`;let n=new Nt(".site-wide-search",{valueField:"url",labelField:"title",searchField:[],loadThrottle:500,optgroupField:"class",maxOptions:null,optgroups:{},preload:"focus",closeAfterSelect:!0,sortField:[{field:"$order"},{field:"$score"}],placeholder:"Search",load:function(t,n){let r=`${e}?search_text=${encodeURIComponent(t)}`;fetch(r,{credentials:"include"}).then((t=>t.json())).then((t=>{this.clearOptions(),this.optgroups=t.groups,n(t.items)})).catch((()=>{n()}))},onChange:function(e){e.startsWith("http")||(e=t+e),window.location=e},render:{optgroup_header:function(t,e){return`<div class="optgroup-header" notranslate>${e(t.label)}</div>`},option:function(t,e){return`<div class="ts-option" notranslate>\n                    <div><i class="${t.icon}"></i>${e(t.title)}</div>\n                </div>`},item:function(t,e){return`<div class="ts-item" notranslate>\n                    <div>${e(t.title)}</div>\n                  </div>`},dropdown:function(){return"<div notranslate></div>"}}});const r=document.querySelector(".search-wrapper"),o=document.querySelector(".search-icon"),i=document.querySelector(".ts-control"),s=document.querySelector(".search-container");o.addEventListener("click",(t=>{r.classList.add("expanded"),i.classList.add("expanded"),setTimeout((()=>{n.enable(),n.focus()}),150)})),document.addEventListener("click",(t=>{s.contains(t.target)||(r.classList.remove("expanded"),i.classList.remove("expanded"),n.blur())}))}()}}})();